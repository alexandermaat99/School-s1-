<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>User Information</title>
    <style>
      fieldset {
        display: inline-block;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <form id="userInfoForm">
      <!-- Student Info box -->
      <fieldset>
        <legend>Student Info</legend>
        <!-- Inputs for first name, last name, password, date of birth, GPA, and gender -->
        <label for="firstName">First Name:</label>
        <input
          type="text"
          id="firstName"
          name="firstName"
          required
        /><br /><br />

        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required /><br /><br />

        <label for="password">Password:</label>
        <input
          type="password"
          id="password"
          name="password"
          required
        /><br /><br />

        <label for="dob">Date of Birth:</label>
        <input
          type="date"
          id="dob"
          name="dob"
          min="1950-01-01"
          max=""
          required
        /><br /><br />

        <label for="gpa">Overall GPA:</label>
        <input
          type="number"
          id="gpa"
          name="gpa"
          step="0.01"
          required
        /><br /><br />

        <label for="gender">Gender:</label>
        <select id="gender" name="gender">
          <option value="M">Male</option>
          <option value="F">Female</option>
          <option value="O">Other</option></select
        ><br /><br />
      </fieldset>

      <!-- Checkbox for email preference -->
      <br /><br />
      <label for="emails">Receive Emails?</label>
      <input type="checkbox" id="emails" name="emails" checked /><br /><br />

      <!-- Save button -->
      <br /><br />
      <button type="button" id="saveButton">Save</button>
    </form>

    <script>
      // Clear local storage when the page loads
      localStorage.clear();

      // Set focus to the first name input
      document.getElementById("firstName").focus();

      // Save button click event
      document
        .getElementById("saveButton")
        .addEventListener("click", function () {
          // Retrieve values from input fields
          const firstName = document.getElementById("firstName").value.trim();
          const lastName = document.getElementById("lastName").value.trim();

          // Check if required fields (first name and last name) are filled
          if (!firstName || !lastName) {
            // Alert if required fields are missing
            alert("Please enter first name and last name.");
            // Set focus to the first missing input field
            if (!firstName) {
              document.getElementById("firstName").focus();
            } else {
              document.getElementById("lastName").focus();
            }
            return;
          }

          // Get values of other input fields
          const password = document.getElementById("password").value;
          const dob = document.getElementById("dob").value;
          const gpa = document.getElementById("gpa").value;
          const gender = document.getElementById("gender").value;
          const emails = document.getElementById("emails").checked;

          // Store data to local storage
          localStorage.setItem("firstName", firstName);
          localStorage.setItem("lastName", lastName);
          localStorage.setItem("password", password);
          localStorage.setItem("dob", dob);
          localStorage.setItem("gpa", gpa);
          localStorage.setItem("gender", gender);
          localStorage.setItem("emails", emails ? "Yes" : "No");

          // Open a new HTML tab to display stored information
          window.open("display_info.html", "_blank");
        });
    </script>
  </body>
</html>
